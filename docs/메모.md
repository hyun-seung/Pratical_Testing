## 테스트는 왜 필요할까?

### 테스트 코드를 작성하지 않는다면
 - 변화가 생기는 매 순간마다 발생할 수 있는 모든 Case를 고려해야 한다.
 - 변화가 생기는 매 순간마다 모든 팀원이 동일한 고민을 해야 한다.
 - 빠르게 변화하는 소프트웨어의 안전성을 보장할 수 없다.

### 테스트 코드가 병목이 된다면
 - 프로덕션 코드의 안전성을 제공하기 힘들어진다.
 - 테스트 코드 자체가 유지보수하기 어려운, 새로운 짐이 된다.
 - 잘못된 검증이 이루어질 가능성이 생긴다.

### 올바른 테스트 코드는
 - 자동화 테스트로 비교적 빠른 시간 안에 버그를 발견할 수 있고, 수동 테스트에 드는 비용을 크게 절약할 수 있다.
 - 소프트웨어의 빠른 변화를 지원한다.
 - 팀원들의 집단 지성을 팀 차원의 이익으로 승격시킨다.
 - 가까이 보면 느리지만, 멀리 보면 가장 빠르다.


## 단위 테스트
- 작은 코드 단위를 독립적으로 검증하는 테스트 (클래스 or 메서드)
- 검증 속도가 빠르고, 안정적이다.


## 테스트하기 어려운 영역을 구분하고 분리하기
- 외부로 분리할수록 테스트 가능한 코드는 많아진다.

### 테스트하기 어려운 영역
- 관측할 때마다 다른 값에 의존하는 코드 (현재 날짜/시간, 랜덤 값, 전역 변수/함수 ...)
- 외부 세계에 영향을 주는 코드 (표준 출력, 메시지 발송, 데이터베이스에 기록하기 ...)

### 테스트하기 쉬운 영역 - 순수함수
- 같은 입력에는 항상 같은 결과
- 외부 세상과 단절된 형태

### [공부 필요] lombok (사용 가이드)
- @Data, @Setter, @AllArgsConstructor 지양
- 양방향 연관관계 시 @ToString 순환 참조 문제

### TTD (Test Driven Development)
- 프로덕션 코드보다 테스트 코드를 먼저 작성하여 테스트가 구현 과정을 주도하도록 하는 방법론

### 선 기능 구현, 후 테스트 작성
- 테스트 자체의 누락 가능성
- 특정 테스트 케이스(해피 케이스)만 검증할 가능성
- 잘못된 구현을 다소 늦게 발견할 가능성

### 선 테스트 작성, 후 기능 구현
- 복잡도가 낮은, 테스트 가능한 코드로 구현할 수 있게 한다.
- 쉽게 발견하기 어려운 엣지 케이스를 놓치지 않게 해준다.
- 구현에 대한 빠른 피드백을 받을 수 있다.
- 과감한 리팩토링이 가능해진다.

### 테스트는 문서다.
- 프로덕션 기능을 설명하는 테스트 코드 문서
- 다양한 테스트 케이스를 통해 프로덕션 코드를 이해하는 시각과 관점을 보완
- 어느 한 사람이 과거에 경험했던 고민의 결과물을 팀 차원으로 승격시켜서, 모두의 자산으로 공유할 수 있다.

### BDD (Behavior Driven Development)
- TDD에서 파생된 개발 방법
- 함수 단위의 테스트에 집중하기보다, 시나리오에 기반한 테스트케이스 자체에 집중하여 테스트한다.
- 개발자가 아닌 사람이 봐도 이해할 수 있을 정도의 추상화 수준(레벨)을 권장
- Given / When / Then
  - Given : 시나리오 진행에 필요한 모든 준비 과정 (객체, 값, 상태 등)
  - When : 시나리오 행동 진행
  - Then : 시나리오 진행에 대한 결과 명시, 검증

### [공부 필요] Junit vs Spock

### 통합 테스트
- 여러 모듈이 협력하는 기능을 통합적으로 검증하는 테스트
- 일반적으로 작은 범위의 단위 테스트만으로는 기능 전체의 신뢰성을 보장할 수 없다.
- 풍부한 단위 테스트 & 큰 기능 단위를 검증하는 통합 테스트

### Library vs Framework
- Library : 내 코드가 주체가 된다. (능동적)
- Framework : 내 코드가 수동적이게 된다.

### Spring
- IoC (Inversion of Control)
- DI (Dependency Injection)
- AOP (Aspect Oriented Programming)

### ORM (Object-Relational Mappiong)
- 객체 지향 패러다임과 관계형 DB 패러다임의 불일치
- 이전에는 개발자가 객체의 데이터를 한땀한땀 매핑하여 DB에 저장 및 조회(CRUD)
- ORM을 사용함으로써 개발자는 단순 작업을 줄이고, 비즈니스 로직에 집중할 수 있다.

### JPA (Java Persistence API) 
- Java 진영의 ORM 기술 표준
- 인터페이스이고, 여러 구현체가 있지만 보통 Hibernate를 많이 사용한다.
- 반복적인 CRUD SQL을 생성 및 실행해주고, 여러 부가 기능들을 제공한다.
- 편리하지만 쿼리를 직접 작성하지 않기 때문에, 어떤 식으로 쿼리가 만들어지고 실행되는지 명확하게 이해하고 있어야 한다.
- Spring 진영에서는 JPA를 한번 더 추상화한 Spring Data JPA 제공
- QueryDSL과 조합하여 많이 사용한다. (타입체크, 동적쿼리)

### Persistence Layer
- Data Access의 역할
- Data에 대한 CRUD에만 집중한 레이어
- 비즈니스 가공 로직이 포함되어서는 안 된다.